import{_ as k}from"./preload-helper.CLcXU_4U.js";if(document.location.pathname==="/tags"||document.location.pathname==="/tags/"){const e=await k(()=>import("./index.Bato3lut.js"),[]),a=document.getElementById("tag-mind-map"),u=a.getAttribute("data-value"),n=document.getElementById("tag-mind-map-bar"),m=document.getElementById("bar-visit-Link"),c=(r,o,s)=>{m.href=`/tags/${r}`,n.style.left=o-n.getBoundingClientRect().width/2+"px",n.style.top=s+24+"px",n.style.display="block"};if(a&&u){let r=function(t){t.active||d.alphaTarget(.3).restart(),t.subject.fx=t.subject.x,t.subject.fy=t.subject.y,c(t.subject.tag,t.sourceEvent.clientX,t.sourceEvent.clientY)},o=function(t){t.subject.fx=t.x,t.subject.fy=t.y,c(t.subject.tag,t.sourceEvent.clientX,t.sourceEvent.clientY)},s=function(t){t.active||d.alphaTarget(0),t.subject.fx=null,t.subject.fy=null,c(t.subject.tag,t.sourceEvent.clientX,t.sourceEvent.clientY)};const p=parseInt(a.getAttribute("width")||"400"),h=parseInt(a.getAttribute("height")||"300"),i=JSON.parse(u),g=e.create("svg").attr("id","tag-svg").attr("viewBox",`0 0 ${p} ${h}`).attr("preserveAspectRatio","xMidYMid meet");a.appendChild(g.node());const d=e.forceSimulation(i.nodes).force("link",e.forceLink(i.links).id(t=>t.tag).distance(100)).force("charge",e.forceManyBody().strength(-200)).force("center",e.forceCenter(p/2,h/2)),b=g.append("g").selectAll("line").data(i.links).join("line").attr("class","link"),l=g.append("g").selectAll("g").data(i.nodes).join("g").attr("class","node").attr("data-tag",t=>t.tag).call(e.drag().on("start",r.bind(void 0)).on("drag",o.bind(void 0)).on("end",s.bind(void 0))),y=l.append("rect").attr("class","tag-bg").attr("rx",6).attr("ry",6);l.append("text").text(t=>`${t.tag}(${t.count})`).attr("class","tag-text").attr("x",8).attr("y",20),y.attr("width",function(){return(this.parentNode.querySelector("text")?.getComputedTextLength()??16)+16}).attr("height",30),d.on("tick",()=>{b.attr("x1",t=>t.source.x).attr("y1",t=>t.source.y).attr("x2",t=>t.target.x).attr("y2",t=>t.target.y),l.attr("transform",t=>`translate(${t.x-40},${t.y-15})`)}),a.querySelectorAll(".node").forEach(t=>{const x=f=>{const j=t.getBoundingClientRect().left+t.getBoundingClientRect().width/2+Math.ceil(f.movementX),E=t.getBoundingClientRect().top+t.getBoundingClientRect().height/2+Math.ceil(f.movementY);c(t.getAttribute("data-tag")??"",j,E)};t.addEventListener("mouseover",x)})}}
